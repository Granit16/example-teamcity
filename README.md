# Домашнее задание к занятию 11 «Teamcity»

## Подготовка к выполнению

1. В Yandex Cloud создал новый инстанс (4CPU4RAM) на основе образа jetbrains/teamcity-server и выполнил первоначальную настройку.
2. Создал еще один инстанс (2CPU4RAM) на основе образа jetbrains/teamcity-agent. Прописал к нему переменную окружения SERVER_URL: "http://<teamcity_url>:8111". * выполнял ДЗ несколько дней, после каждого выключения ВМ приходилось править эту переменную, указывая актуальный IP-адрес сервера.
3. Авторизовал агент. * После каждого включения ВМ завново проводил эту процедуру.
4. Сделал fork репозитория **example-teamcity**.
4. Создал VM (2CPU4RAM) и ВМ для сервера Nexus, запустил playbook. предварительно сконфигурировав его.



## Основная часть

1. Создал новый проект в teamcity на основе fork.
2. Сделал autodetect конфигурации.
3. Сохранил необходимые шаги, запустите первую сборку master.
4. Поменял условия сборки: если сборка по ветке master, то должен происходит ``mvn clean deploy``, иначе ``mvn clean test``.
5. Для deploy загрузил **settings.xml** в набор конфигураций maven у teamcity, предварительно записав туда креды для подключения к nexus.
6. В pom.xml поменял ссылки на репозиторий и nexus.
7. Запустил сборку по master, всё прошло успешно и артефакт появился в nexus.
8. Мигрировал build configuration в репозиторий.
9. Создал отдельную ветку **feature/add_reply** в репозитории.
10. Написал метод для класса Welcomer, возвращающий слово **hunter**.
11. Дополнил тест для нового метода на поиск слова **hunter** в новой реплике.
12. Сделал push всех изменений в новую ветку репозитория.
13. Сборка самостоятельно запустилась, тесты прошли успешно.
14. Внес изменения из произвольной ветки **feature/add_reply** в master через Merge.
15. В сборке по ветке master нет собранного артефакта.
16. Настроил конфигурацию так, чтобы она собирала **.jar** в артефакты сборки.
17. Провел повторную сборку мастера, сборка прошла успешно и артефакты собраны.
18. Конфигурация в репозитории содержит все настройки конфигурации из teamcity.
19. Ответ оформлен тут, собственно).
